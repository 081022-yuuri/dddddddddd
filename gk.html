<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ğŸ©¸ ê²½ì°° ìˆ˜ì‚¬ ê²Œì„ - ì–´ë‘  ì†ì˜ ì§„ì‹¤ ğŸ©¸</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap');
  body {
    background: #100000;
    color: #ff4444;
    font-family: 'Roboto Mono', monospace;
    margin: 0; padding: 20px;
    user-select: none;
    overflow-x: hidden;
  }
  h1, h2 {
    text-shadow: 0 0 5px #ff0000, 0 0 10px #ff0000;
  }
  .section {
    background: #330000cc;
    padding: 20px;
    margin-bottom: 30px;
    border-radius: 10px;
    box-shadow: 0 0 15px #ff2222 inset;
  }
  button {
    background: #440000;
    border: 1px solid #ff1111;
    color: #ff9999;
    font-weight: bold;
    padding: 12px 20px;
    margin: 10px 6px 6px 0;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #ff0000;
    color: #220000;
  }
  #output {
    white-space: pre-line;
    line-height: 1.6em;
    font-size: 1.1em;
  }
  #timer {
    font-size: 1.4em;
    font-weight: bold;
    color: #ff1111;
    text-shadow: 0 0 10px #ff0000;
    margin-bottom: 20px;
  }
  textarea {
    width: 100%;
    height: 120px;
    background: #220000;
    color: #ffbbbb;
    border: 1px solid #ff2222;
    font-family: monospace;
    font-size: 1em;
    padding: 10px;
    border-radius: 6px;
    resize: none;
  }
</style>
</head>
<body>

<h1>ğŸ©¸ ê²½ì°° ìˆ˜ì‚¬ ê²Œì„ - ì–´ë‘  ì†ì˜ ì§„ì‹¤ ğŸ©¸</h1>
<div id="timer">â³ ë‚¨ì€ ì‹œê°„: <span id="timeLeft">60</span>ì´ˆ</div>

<div id="story" class="section">
  <p>ê¹Šì€ ë°¤, ëŒ€í•™ ë„ì„œê´€ì—ì„œ í¬ê·€ ë„ì„œê°€ ì‚¬ë¼ì¡Œë‹¤.<br>
  ë²”ì¸ì˜ í”ì ì„ ì«“ì•„, ìˆ˜ì‚¬ë¥¼ ì‹œì‘í•œë‹¤.<br><br>
  <strong>ìˆ˜ì‚¬ ë°©ì‹ì„ ì„ íƒí•˜ë¼.</strong></p>
  <button onclick="choosePath('logic')">ğŸ§  ë…¼ë¦¬ì  ìˆ˜ì‚¬</button>
  <button onclick="choosePath('instinct')">ğŸ”¥ ì§ê° ìˆ˜ì‚¬</button>
</div>

<div id="gameArea" class="section" style="display:none;">
  <div id="narration"></div>
  <div id="choices"></div>
  <textarea id="memo" placeholder="ìˆ˜ì‚¬ ë©”ëª¨ ì‘ì„± ê°€ëŠ¥..."></textarea>
</div>

<script>
  let timeLeft = 60;
  let timerId;
  let path = '';
  let state = 0;
  let clues = { usb: false, footprint: false, testimony: false };
  let npcMood = { park: 0 };

  const narrationEl = document.getElementById('narration');
  const choicesEl = document.getElementById('choices');
  const memoEl = document.getElementById('memo');
  const timeEl = document.getElementById('timeLeft');
  const gameArea = document.getElementById('gameArea');
  const storyDiv = document.getElementById('story');

  function startTimer() {
    timerId = setInterval(() => {
      timeLeft--;
      timeEl.textContent = timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timerId);
        gameOver("â° ì‹œê°„ì´ ë‹¤ ë˜ì—ˆë‹¤. ë²”ì¸ì€ ì‚¬ë¼ì¡Œê³ , ë‹¹ì‹ ì€ ì‹¤íŒ¨í–ˆë‹¤...");
      }
    }, 1000);
  }

  function choosePath(selected) {
    path = selected;
    storyDiv.style.display = 'none';
    gameArea.style.display = 'block';
    startTimer();
    advanceStory();
    scrollToGameArea();
  }

  function scrollToGameArea() {
    gameArea.scrollIntoView({behavior: 'smooth'});
  }

  function clearChoices() {
    choicesEl.innerHTML = '';
  }

  function addChoice(text, callback) {
    let btn = document.createElement('button');
    btn.textContent = text;
    btn.onclick = () => {
      callback();
      scrollToGameArea();
    };
    choicesEl.appendChild(btn);
  }

  function advanceStory() {
    clearChoices();
    switch (state) {
      case 0:
        narrationEl.textContent =
          path === 'logic'
            ? "ğŸ“ CCTV ê¸°ë¡ê³¼ USB íŒŒì¼ì„ ë¶„ì„í•œë‹¤. ì–´ë‘  ì† ì§„ì‹¤ì„ íŒŒí—¤ì³ë¼."
            : "ğŸ‘£ ë°œìêµ­ì„ ì«“ì•„ í˜„ì¥ì„ ìƒ…ìƒ…ì´ ë’¤ì§„ë‹¤. ê°ê°ì— ì˜ì§€í•´ ë²”ì¸ì˜ í”ì ì„ ì°¾ì•„ë¼.";
        if (path === 'logic') {
          addChoice('USB ì¡°ì‚¬', () => {
            clues.usb = true;
            narrationEl.textContent = 'ğŸ“‚ USBì—ì„œ ì‚­ì œëœ íŒŒì¼ í”ì  ë°œê²¬! ë²”ì¸ì˜ ë‹¨ì„œì¼ê¹Œ?';
            nextState();
          });
          addChoice('CCTV í™•ì¸', () => {
            narrationEl.textContent = 'ğŸ¥ CCTV ì˜ìƒì€ í˜•ê´‘ë“± ê¹œë¹¡ì„ìœ¼ë¡œ ì •í™•í•˜ì§€ ì•Šë‹¤.';
            nextState();
          });
        } else {
          addChoice('ë°œìêµ­ ì¶”ì ', () => {
            clues.footprint = true;
            narrationEl.textContent = 'ğŸ‘£ í¬ê·€ ë¸Œëœë“œ ì‹ ë°œì˜ ë°œìêµ­ì„ ë°œê²¬í–ˆë‹¤.';
            nextState();
          });
          addChoice('ë‹´ë°° ëƒ„ìƒˆ íƒì§€', () => {
            narrationEl.textContent = 'ğŸŒ‘ ë‹´ë°° ëƒ„ìƒˆê°€ ë²”ì¸ì˜ í”ì ì¼ ìˆ˜ ìˆë‹¤.';
            nextState();
          });
        }
        break;

      case 1:
        narrationEl.textContent = 'ğŸ§â€â™‚ï¸ ë°•í˜„ìˆ˜ ìš©ì˜ìë¥¼ ë§ˆì£¼í–ˆë‹¤. ì‹¬ë¬¸ ë°©ì‹ì„ ì„ íƒí•˜ë¼.';
        addChoice('ìœ í™”ì ìœ¼ë¡œ ì‹¬ë¬¸', () => {
          npcMood.park = 1;
          narrationEl.textContent = 'ë°•í˜„ìˆ˜ê°€ ë§ˆìŒì„ ì—´ê¸° ì‹œì‘í•œë‹¤.';
          nextState();
        });
        addChoice('ê°•ì••ì ìœ¼ë¡œ ëª°ì•„ë¶™ì´ê¸°', () => {
          npcMood.park = -1;
          narrationEl.textContent = 'ë°•í˜„ìˆ˜ê°€ ë¶ˆì•ˆí•´í•˜ë©° ë¶„ë…¸í•œë‹¤.';
          nextState();
        });
        break;

      case 2:
        narrationEl.textContent =
          path === 'logic'
            ? 'ğŸ” USB ë¶„ì„ ê²°ê³¼ ë°•í˜„ìˆ˜ì˜ ìˆ˜ìƒí•œ í™œë™ ê¸°ë¡ì´ ë“œëŸ¬ë‚¬ë‹¤.'
            : 'ğŸ’¥ ë°œìêµ­ê³¼ ë‹´ë°° ëƒ„ìƒˆê°€ ë°•í˜„ìˆ˜ì˜ ì•Œë¦¬ë°”ì´ì™€ ë§ì§€ ì•ŠëŠ”ë‹¤.';
        addChoice('ì‹¬ë¬¸ ê³„ì†', () => {
          if (npcMood.park === -1) {
            narrationEl.textContent = 'ë°•í˜„ìˆ˜ê°€ ê±°ì§“ë§ì„ í•˜ë©° ë¶„ë…¸í•œë‹¤.';
            clues.testimony = false;
          } else {
            narrationEl.textContent = 'ë°•í˜„ìˆ˜ê°€ ì£„ì±…ê°ì„ ë“œëŸ¬ë‚´ë©° ì§„ìˆ í•œë‹¤.';
            clues.testimony = true;
          }
          nextState();
        });
        addChoice('ë‹¤ë¥¸ ìš©ì˜ì ì¡°ì‚¬', () => {
          narrationEl.textContent = 'ì´ì„œì—°ì— ê´€í•œ ì •ë³´ë¥¼ ìˆ˜ì§‘í•œë‹¤. ê·¸ë…€ì˜ í–‰ì ì€ ë¶ˆíˆ¬ëª…í•˜ë‹¤.';
          nextState(true);
        });
        break;

      case 3:
        narrationEl.textContent = 'ìµœì¢… ì„ íƒ! ë²”ì¸ì„ ì§€ëª©í•˜ë¼.';
        addChoice('ê¹€ì§€í›ˆ', () => finalJudgement('ê¹€ì§€í›ˆ'));
        addChoice('ì´ì„œì—°', () => finalJudgement('ì´ì„œì—°'));
        addChoice('ë°•í˜„ìˆ˜', () => finalJudgement('ë°•í˜„ìˆ˜'));
        break;

      case 4:
        // ê²Œì„ ë
        break;
    }
  }

  function nextState(skip = false) {
    state++;
    if (skip) {
      narrationEl.textContent += '\n(ë³µì¡í•œ ì‹¬ë¦¬ì „ê³¼ ì¶”ê°€ ìˆ˜ì‚¬ê°€ ì˜ˆì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤...)';
    }
    advanceStory();
  }

  function finalJudgement(suspect) {
    clearInterval(timerId);
    clearChoices();
    let result = '';
    if (suspect === 'ë°•í˜„ìˆ˜') {
      if (clues.usb && clues.testimony) {
        result =
          'ğŸ”ª ë°•í˜„ìˆ˜ê°€ ë²”ì¸ì´ë‹¤! í¬ê·€ ë„ì„œë¥¼ í›”ì¹˜ë ¤ í–ˆê³  ê±°ì§“ê³¼ ë¶„ë…¸ë¡œ ì§„ì‹¤ì„ ìˆ¨ê²¼ë‹¤. ì‚¬ê±´ í•´ê²°!';
      } else {
        result = 'âŒ ì¦ê±° ë¶€ì¡±. ë°•í˜„ìˆ˜ ë²”ì¸ ì—¬ë¶€ ë¶ˆí™•ì‹¤. ì‚¬ê±´ ë¯¸ì œë¡œ ë‚¨ì•˜ë‹¤.';
      }
    } else if (suspect === 'ì´ì„œì—°') {
      if (clues.footprint) {
        result =
          'ğŸ’€ ì´ì„œì—°ì˜ ë°œìêµ­ì´ í˜„ì¥ê³¼ ì¼ì¹˜í•œë‹¤. ê·¸ë…€ê°€ ë²”ì¸ì¼ ìˆ˜ë„ ìˆë‹¤.';
      } else {
        result = 'âŒ ì¦ê±° ë¶ˆì¶©ë¶„. ì´ì„œì—°ì„ ë²”ì¸ìœ¼ë¡œ ë‹¨ì •í•  ìˆ˜ ì—†ë‹¤.';
      }
    } else {
      result = 'âŒ ê¹€ì§€í›ˆì— ëŒ€í•œ ì¦ê±°ê°€ ë¶€ì¡±í•˜ë‹¤. ìš©ì˜ì„ ìƒì—ì„œ ì œì™¸ëœë‹¤.';
    }
    narrationEl.textContent = result + '\n\nê²Œì„ ì¢…ë£Œ. ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ë‹¤ì‹œ ì‹œì‘í•˜ì„¸ìš”.';
  }

  function gameOver(msg) {
    clearChoices();
    narrationEl.textContent = msg + '\n\nê²Œì„ ì¢…ë£Œ. ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ë‹¤ì‹œ ì‹œì‘í•˜ì„¸ìš”.';
  }
</script>

</body>
</html>
